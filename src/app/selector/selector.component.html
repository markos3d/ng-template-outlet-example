<div class="app-selector btn-group" dropdown>
  <button dropdownToggle type="button" class="btn btn-primary dropdown-toggle">
    <ng-template #defaultSelected>
      {{ picked?.name || label }}
    </ng-template>

    <ng-container [ngTemplateOutlet]="selectedTemplateRef || defaultSelected"
      [ngTemplateOutletContext]="{ $implicit: picked }">
    </ng-container>
    <span class="caret"></span>
  </button>

  <ul *dropdownMenu class="dropdown-menu">
    @for (option of options; track option; let i = $index) {
      <li (click)="selectOption(option)">
        <ng-template #defaultOption>
          <a class="dropdown-item">
            {{ option?.name || option }}
          </a>
        </ng-template>
        <ng-container [ngTemplateOutlet]="optionTemplateRef || defaultOption"
          [ngTemplateOutletContext]="{ $implicit: option, index: i }">
        </ng-container>
      </li>
    }
  </ul>
</div>